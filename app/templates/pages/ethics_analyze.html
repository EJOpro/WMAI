{% extends "base.html" %}

{% block title %}비윤리/스팸지수 평가 - Community Admin{% endblock %}

{% block extra_css %}
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
{% endblock %}

{% block content %}
<div class="ethics-analyze-container">
    <!-- 헤더 -->
    <div class="ethics-analyze-header">
        <h1><i class="fas fa-search"></i> 비윤리/스팸지수 분석기</h1>
        <p>텍스트를 입력하면 실시간으로 비윤리성과 스팸 여부를 분석합니다</p>
    </div>

    <!-- 입력 섹션 -->
    <div class="ethics-input-section">
        <div class="input-group">
            <label for="textInput">분석할 텍스트를 입력하세요</label>
            <textarea 
                id="textInput" 
                class="text-input" 
                placeholder="예: 너 정말 멍청하구나&#10;또는&#10;안녕하세요, 좋은 아침입니다!"
                maxlength="1000"
            ></textarea>
            <div class="char-count">
                <span id="charCount">0</span> / 1000자
            </div>
        </div>
        
        <div class="options-group">
            <button id="analyzeBtn" class="btn btn-primary">
                <i class="fas fa-search"></i>
                분석하기
            </button>
        </div>
        
        <div id="errorMessage" class="error-message"></div>
    </div>

    <!-- 로딩 스피너 -->
    <div id="loadingSpinner" class="loading-spinner">
        <div class="spinner"></div>
        <p>분석 중입니다...</p>
    </div>

    <!-- 결과 섹션 -->
    <div id="resultSection" class="ethics-result-section">
        <div class="result-header">
            <h3><i class="fas fa-chart-bar"></i> 분석 결과</h3>
            <div class="analysis-time" id="analysisTime"></div>
        </div>
        
        <div class="score-display">
            <div id="scoreCard" class="score-card">
                <div class="score-label">비윤리점수 (신뢰도)</div>
                <div class="score-value" id="scoreValue">-</div>
                <div class="score-unit">/ 100</div>
            </div>
            
            <div id="spamCard" class="score-card">
                <div class="score-label">스팸지수 (신뢰도)</div>
                <div class="score-value" id="spamValue">-</div>
                <div class="score-unit">/ 100</div>
            </div>
        </div>
        
        <div class="types-section">
            <div class="types-label">감지된 유형</div>
            <div class="types-container" id="typesContainer">
                <!-- 유형 태그들이 여기에 동적으로 추가됩니다 -->
            </div>
        </div>
        
        <div id="recommendation" class="recommendation">
            <!-- 추천 사항이 여기에 동적으로 추가됩니다 -->
        </div>
    </div>

    <!-- 네비게이션 링크 -->
    <div class="nav-links">
        <a href="/ethics_dashboard"><i class="fas fa-list"></i> 로그 대시보드</a>
        <a href="/docs" target="_blank"><i class="fas fa-book"></i> API 문서</a>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', path='/js/ethics_analyze.js') }}"></script>
{% endblock %}

